@using Microsoft.AspNetCore.Components.Web
@using Radzen.Blazor
@namespace RazorClassLibrary.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<!DOCTYPE html>
<html lang="en">

	<head>
		<!-- Apply saved or system theme as early as possible to avoid flash of the wrong theme -->
		<script>
			(function(){
				try {
					var t = null;
					try {
						t = localStorage.getItem('tvc-theme') || localStorage.getItem('app-theme');
					} catch (storageError) {
						// localStorage blocked by tracking prevention - use system preference
						console.warn('localStorage blocked, using system preference:', storageError.message);
					}
					if (t === 'dark' || t === 'light') {
						document.documentElement.setAttribute('data-bs-theme', t);
					} else {
						var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
						document.documentElement.setAttribute('data-bs-theme', prefersDark ? 'dark' : 'light');
					}
				} catch (e) { 
					// Fallback to light theme if everything fails
					console.error('Theme initialization failed:', e);
					document.documentElement.setAttribute('data-bs-theme', 'light');
				}
			})();
		</script>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<base href="~/" />
	<link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
	<link href="css/site.css" rel="stylesheet" />
	<link href="VoiceLauncher.styles.css" rel="stylesheet" />
	<link rel="stylesheet" href="css/animate.min.css" />
	<link rel="stylesheet" href="css/bootstrap-icons.min.css">

	<link rel="stylesheet" href="/css/prism.css" />
	<component type="typeof(RadzenTheme)" render-mode="ServerPrerendered" param-Theme="@("material")" />
	<component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>

<body>
	@RenderBody()
	<div>
	</div>
	<div id="blazor-error-ui">
		<environment include="Staging,Production">
			An error has occurred. This application may no longer respond until reloaded.
		</environment>
		<environment include="Development">
			An unhandled exception has occurred. See browser dev tools for details.
		</environment>
		<a href="" class="reload">Reload</a>
		<a class="dismiss">🗙</a>
	</div>

	<script src="_framework/blazor.server.js"></script>
	<script
		src="_content/Radzen.Blazor/Radzen.Blazor.js?v=@(typeof(Radzen.Colors).Assembly.GetName().Version)"></script>
	<script src="/scripts/prism.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script type="module">
		// Eagerly import the selection modal interop module so it can attach fallback helpers and log its load status
		(async () => {
			try {
				const m = await import('/_content/RazorClassLibrary/selectionModalInterop.js');
				console.log('selectionModalInterop module eagerly imported');
			} catch (e) {
				console.warn('selectionModalInterop eager import failed', e);
			}
		})();
	</script>
	<script>
		function CallChange(elementId) {
			var element = document.getElementById(elementId);
			if (element) {
				var event = new Event('change');
				element.dispatchEvent(event);
				//console.log(elementId + " change fired " + element.localName)
			}
		}
		window.setFocus = (elementId) => {
			setTimeout(internalFocus, 10, elementId);
		};
		function internalFocus(elementId) {
			var element = document.getElementById(elementId);
			if (element == null) {
				setTimeout(internalFocus, 10, elementId);
				return;
			}
			element.focus();
			//element.select();
		}
		window.myJsFunctions = {
			focusElement: function (element) {
				element.focus();
			}
		}
		window.clipboardCopy = {
			copyText: function (text) {
				navigator.clipboard.writeText(text).then(function () {
					// alert("Copied to clipboard!");
					//console.log("Copied to clipboard!");
				})
					.catch(function (error) {
						console.log(error);
					});
			}
		};
		window.getPageYOffset = function () {
			return window.pageYOffset;
		}
		function adjustTextArea(textArea) {
			textArea.style.height = 'auto'; // Reset the height
			textArea.style.height = (textArea.scrollHeight) + 'px'; // Set the height to the scroll height
		}
	</script>
	<script src="js/site.js"></script>

</body>

</html>